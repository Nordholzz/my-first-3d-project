<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>3D Viewer with Theme Toggle</title>
  <style>
    body { 
      margin: 0; 
      overflow: hidden; 
      font-family: Arial, sans-serif;
    }
    canvas { 
      display: block; 
    }
    #theme-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
      padding: 8px 16px;
      background: rgba(255,255,255,0.8);
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      z-index: 100;
    }
    #reset-camera {
      position: absolute;
      top: 60px;
      right: 20px;
      padding: 8px 16px;
      background: rgba(255,255,255,0.8);
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      z-index: 100;
    }
  </style>
</head>
<body>
  <button id="theme-toggle">Тёмный фон</button>
  <button id="reset-camera">Сброс камеры</button>

  <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
  
  <script>
    // Инициализация
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x111111); // Начальный тёмный фон
    
    // Исходные параметры камеры
    const initialCameraPosition = {
      x: 55,
      y: 85,
      z: 40
    };
    const initialCameraLookAt = new THREE.Vector3(2, 6, 0.5);
    
    const camera = new THREE.PerspectiveCamera(4, window.innerWidth/window.innerHeight, 0.5, 500);
    camera.position.set(initialCameraPosition.x, initialCameraPosition.y, initialCameraPosition.z);
    camera.lookAt(initialCameraLookAt);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Освещение
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
    scene.add(ambientLight);
    
    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.9);
    directionalLight.position.set(1, 1, 1);
    scene.add(directionalLight);

    // Загрузка модели (замените на свою)
    const loader = new THREE.GLTFLoader();
    loader.load(
      'model.glb',
      (gltf) => {
        scene.add(gltf.scene);
        console.log('модель загружена');
      },
      undefined,
      (error) => console.error('Error:', error)
    );

    // OrbitControls
    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.target.copy(initialCameraLookAt);

    // Переключение темы
    const themeToggle = document.getElementById('theme-toggle');
    let isDarkMode = true;

    themeToggle.addEventListener('click', () => {
      isDarkMode = !isDarkMode;
      
      if (isDarkMode) {
        scene.background = new THREE.Color(0x111111); // Тёмный
        themeToggle.textContent = 'Светлый фон';
        ambientLight.intensity = 0.5; // Мягкий свет для тёмного фона
      } else {
        scene.background = new THREE.Color(0xf0f0f0); // Светлый
        themeToggle.textContent = 'Тёмный фон';
        ambientLight.intensity = 1.0; // Ярче для светлого фона
      }
    });

    // Сброс камеры
    const resetCameraBtn = document.getElementById('reset-camera');
    resetCameraBtn.addEventListener('click', () => {
      camera.position.set(initialCameraPosition.x, initialCameraPosition.y, initialCameraPosition.z);
      camera.lookAt(initialCameraLookAt);
      controls.target.copy(initialCameraLookAt);
      controls.update();
    });

    // Анимация
    function animate() {
      requestAnimationFrame(animate);
      controls.update();
      renderer.render(scene, camera);
    }
    animate();

    // Ресайз
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
